{"version":3,"file":"react-query.development.js","sources":["../src/utils.js","../src/config.js","../src/queryCache.js","../src/setFocusHandler.js","../src/useIsFetching.js","../src/useMutation.js","../src/useBaseQuery.js","../src/useQuery.js","../src/usePaginatedQuery.js","../src/useInfiniteQuery.js"],"sourcesContent":["import React from 'react'\n\n//\n\nexport const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport const noop = () => {}\nexport const identity = d => d\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    if (\n      args[0].hasOwnProperty('queryKey') &&\n      args[0].hasOwnProperty('queryFn')\n    ) {\n      const { queryKey, queryFn, config = {} } = args[0]\n      return [queryKey, queryFn, config, ...args.slice(1)]\n    } else {\n      throw new Error('queryKey and queryFn keys are required.')\n    }\n  }\n\n  const [queryKey, queryFn, config = {}, ...rest] = args\n\n  return [queryKey, queryFn, config, ...rest]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (\n    queryInfo.query.config.suspense ||\n    queryInfo.query.config.useErrorBoundary\n  ) {\n    if (\n      queryInfo.query.state.status === statusError &&\n      queryInfo.query.state.throwInErrorBoundary\n    ) {\n      throw queryInfo.error\n    }\n\n    if (queryInfo.query.config.suspense && queryInfo.status !== statusSuccess) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.query.fetch()\n    }\n  }\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n","import React from 'react'\nimport { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const configContext = React.createContext()\n\nconst DEFAULTS = {\n  shared: {\n    suspense: false,\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n  },\n  queries: {\n    enabled: true,\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: true,\n    refetchInterval: false,\n    queryFnParamsFilter: identity,\n    refetchOnMount: true,\n    isDataEqual: deepEqual,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n  mutations: {\n    throwOnError: false,\n    onMutate: noop,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULTS,\n}\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = useConfigContext()\n\n  const newConfig = React.useMemo(() => {\n    const { shared = {}, queries = {}, mutations = {} } = config\n    const {\n      shared: contextShared = {},\n      queries: contextQueries = {},\n      mutations: contextMutations = {},\n    } = configContextValue\n    return {\n      shared: {\n        ...contextShared,\n        ...shared,\n      },\n      queries: {\n        ...contextQueries,\n        ...queries,\n      },\n      mutations: {\n        ...contextMutations,\n        ...mutations,\n      },\n    }\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULTS) }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n\nfunction invalidQueryKey() {\n  throw new Error('A valid query key is required!')\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    invalidQueryKey()\n  }\n\n  if (!Array.isArray(queryKey)) {\n    queryKey = [queryKey]\n  }\n\n  if (queryKey.some(d => typeof d === 'function')) {\n    invalidQueryKey()\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  if (!queryHash) {\n    invalidQueryKey()\n  }\n\n  return [queryHash, queryKey]\n}\n","import React from 'react'\nimport {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  getQueryArgs,\n  deepIncludes,\n  noop,\n  uid,\n  statusIdle,\n  Console,\n} from './utils'\nimport { defaultConfigRef } from './config'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport const useQueryCache = () => React.useContext(queryCacheContext)\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const resolvedQueryCache = React.useMemo(\n    () => queryCache || makeQueryCache(),\n    [queryCache]\n  )\n\n  React.useEffect(() => {\n    queryCaches.push(resolvedQueryCache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(resolvedQueryCache)\n      if (i > -1) {\n        queryCaches.splice(i, 1)\n      }\n      // if the resolvedQueryCache was created by us, we need to tear it down\n      if (queryCache == null) {\n        resolvedQueryCache.clear()\n      }\n    }\n  }, [resolvedQueryCache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={resolvedQueryCache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n\nconst actionInit = 'Init'\nconst actionFailed = 'Failed'\nconst actionMarkStale = 'MarkStale'\nconst actionMarkGC = 'MarkGC'\nconst actionFetch = 'Fetch'\nconst actionSuccess = 'Success'\nconst actionError = 'Error'\nconst actionSetState = 'SetState'\n\nexport function makeQueryCache({ frozen = isServer, defaultConfig } = {}) {\n  // A frozen cache does not add new queries to the cache\n  const globalListeners = []\n\n  const configRef = defaultConfig\n    ? { current: defaultConfig }\n    : defaultConfigRef\n\n  const queryCache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    queryCache.isFetching = Object.values(queryCache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n\n    globalListeners.forEach(d => d(queryCache))\n  }\n\n  queryCache.subscribe = cb => {\n    globalListeners.push(cb)\n    return () => {\n      globalListeners.splice(globalListeners.indexOf(cb), 1)\n    }\n  }\n\n  queryCache.clear = ({ notify = true } = {}) => {\n    Object.values(queryCache.queries).forEach(query => query.clear())\n    queryCache.queries = {}\n    if (notify) {\n      notifyGlobalListeners()\n    }\n  }\n\n  queryCache.getQueries = (predicate, { exact } = {}) => {\n    if (predicate === true) {\n      return Object.values(queryCache.queries)\n    }\n\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = configRef.current.shared.queryKeySerializerFn(predicate)\n\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(queryCache.queries).filter(predicate)\n  }\n\n  queryCache.getQuery = queryKey =>\n    queryCache.getQueries(queryKey, { exact: true })[0]\n\n  queryCache.getQueryData = queryKey =>\n    queryCache.getQuery(queryKey)?.state.data\n\n  queryCache.removeQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.clear())\n  }\n\n  queryCache.cancelQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.cancel())\n  }\n\n  queryCache.invalidateQueries = async (\n    predicate,\n    { refetchActive = true, exact, throwOnError } = {}\n  ) => {\n    try {\n      return await Promise.all(\n        queryCache.getQueries(predicate, { exact }).map(query => {\n          if (refetchActive && query.instances.length) {\n            return query.fetch()\n          }\n\n          return query.invalidate()\n        })\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  queryCache.resetErrorBoundaries = () => {\n    queryCache.getQueries(true).forEach(query => {\n      query.state.throwInErrorBoundary = false\n    })\n  }\n\n  queryCache.buildQuery = (userQueryKey, queryFn, config = {}) => {\n    config = {\n      ...configRef.current.shared,\n      ...configRef.current.queries,\n      ...config,\n    }\n\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = queryCache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { queryFn, config })\n    } else {\n      query = makeQuery({\n        queryCache,\n        queryKey,\n        queryHash,\n        queryFn,\n        config,\n      })\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (!frozen) {\n        queryCache.queries[queryHash] = query\n\n        if (isServer) {\n          notifyGlobalListeners()\n        } else {\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    query.fallbackInstance = {\n      config: {\n        onSuccess: query.config.onSuccess,\n        onError: query.config.onError,\n        onSettled: query.config.onSettled,\n      },\n    }\n\n    return query\n  }\n\n  queryCache.prefetchQuery = async (...args) => {\n    let [\n      queryKey,\n      queryFn,\n      config,\n      { force, throwOnError } = {},\n    ] = getQueryArgs(args)\n\n    try {\n      const query = queryCache.buildQuery(queryKey, queryFn, config)\n      if (force || query.state.isStale) {\n        await query.fetch()\n      }\n      return query.state.data\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  queryCache.setQueryData = (queryKey, updater, config = {}) => {\n    let query = queryCache.getQuery(queryKey)\n\n    if (!query) {\n      query = queryCache.buildQuery(queryKey, () => new Promise(noop), config)\n    }\n\n    query.setData(updater)\n  }\n\n  function makeQuery({ queryCache, queryKey, queryHash, queryFn, config }) {\n    const initialData =\n      typeof config.initialData === 'function'\n        ? config.initialData()\n        : config.initialData\n\n    const hasInitialData = typeof initialData !== 'undefined'\n\n    const isStale = !config.enabled || !hasInitialData\n\n    const initialStatus = hasInitialData\n      ? statusSuccess\n      : config.enabled\n      ? statusLoading\n      : statusIdle\n\n    let query = {\n      queryKey,\n      queryHash,\n      queryFn,\n      config,\n      instances: [],\n      state: queryReducer(undefined, {\n        type: actionInit,\n        initialStatus,\n        initialData,\n        hasInitialData,\n        isStale,\n      }),\n    }\n\n    query.dispatch = action => {\n      query.state = queryReducer(query.state, action)\n      query.instances.forEach(d => d.onStateUpdate(query.state))\n      notifyGlobalListeners()\n    }\n\n    query.scheduleStaleTimeout = () => {\n      if (isServer) return\n      clearTimeout(query.staleTimeout)\n\n      if (query.config.staleTime === Infinity) {\n        return\n      }\n\n      query.staleTimeout = setTimeout(() => {\n        if (queryCache.getQuery(query.queryKey)) {\n          query.invalidate()\n        }\n      }, query.config.staleTime)\n    }\n\n    query.invalidate = () => {\n      clearTimeout(query.staleTimeout)\n      query.dispatch({ type: actionMarkStale })\n    }\n\n    query.scheduleGarbageCollection = () => {\n      if (query.config.cacheTime === Infinity) {\n        return\n      }\n      query.dispatch({ type: actionMarkGC })\n      query.cacheTimeout = setTimeout(\n        () => {\n          queryCache.removeQueries(\n            d =>\n              d.state.markedForGarbageCollection &&\n              d.queryHash === query.queryHash\n          )\n        },\n        typeof query.state.data === 'undefined' &&\n          query.state.status !== 'error'\n          ? 0\n          : query.config.cacheTime\n      )\n    }\n\n    query.heal = () => {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout)\n\n      // Mark the query as not cancelled\n      query.cancelled = null\n    }\n\n    query.cancel = () => {\n      query.cancelled = cancelledError\n\n      if (query.cancelPromises) {\n        query.cancelPromises()\n      }\n\n      delete query.promise\n    }\n\n    query.clearIntervals = () => {\n      query.instances.forEach(instance => {\n        instance.clearInterval()\n      })\n    }\n\n    query.setState = updater =>\n      query.dispatch({ type: actionSetState, updater })\n\n    query.setData = updater => {\n      // Set data and mark it as cached\n      query.dispatch({ type: actionSuccess, updater })\n\n      // Schedule a fresh invalidation!\n      query.scheduleStaleTimeout()\n    }\n\n    query.clear = () => {\n      clearTimeout(query.staleTimeout)\n      clearTimeout(query.cacheTimeout)\n      clearTimeout(query.retryTimeout)\n      query.clearIntervals()\n      query.cancel()\n      query.dispatch = noop\n      delete queryCache.queries[query.queryHash]\n    }\n\n    query.subscribe = (onStateUpdate = noop) => {\n      const instance = {\n        id: uid(),\n        onStateUpdate,\n      }\n\n      query.instances.push(instance)\n\n      query.heal()\n\n      instance.clearInterval = () => {\n        clearInterval(instance.refetchIntervalId)\n        delete instance.refetchIntervalId\n      }\n\n      instance.updateConfig = config => {\n        const oldConfig = instance.config\n\n        // Update the config\n        instance.config = config\n\n        if (!isServer) {\n          if (oldConfig?.refetchInterval === config.refetchInterval) {\n            return\n          }\n\n          query.clearIntervals()\n\n          const minInterval = Math.min(\n            ...query.instances.map(d => d.config.refetchInterval || Infinity)\n          )\n\n          if (\n            !instance.refetchIntervalId &&\n            minInterval > 0 &&\n            minInterval < Infinity\n          ) {\n            instance.refetchIntervalId = setInterval(() => {\n              if (\n                isDocumentVisible() ||\n                query.instances.some(\n                  instance => instance.config.refetchIntervalInBackground\n                )\n              ) {\n                query.fetch()\n              }\n            }, minInterval)\n          }\n        }\n      }\n\n      instance.run = async () => {\n        try {\n          // Perform the refetch for this query if necessary\n          if (\n            query.config.enabled && // Don't auto refetch if disabled\n            !query.wasSuspended && // Don't double refetch for suspense\n            query.state.isStale && // Only refetch if stale\n            (query.config.refetchOnMount || query.instances.length === 1)\n          ) {\n            await query.fetch()\n          }\n\n          query.wasSuspended = false\n        } catch (error) {\n          Console.error(error)\n        }\n      }\n\n      instance.unsubscribe = () => {\n        query.instances = query.instances.filter(d => d.id !== instance.id)\n\n        if (!query.instances.length) {\n          query.clearIntervals()\n          query.cancel()\n\n          if (!isServer) {\n            // Schedule garbage collection\n            query.scheduleGarbageCollection()\n          }\n        }\n      }\n\n      return instance\n    }\n\n    // Set up the core fetcher function\n    const tryFetchData = async (queryFn, ...args) => {\n      try {\n        // Perform the query\n        const promise = queryFn(...query.config.queryFnParamsFilter(args))\n\n        query.cancelPromises = () => promise.cancel?.()\n\n        const data = await promise\n        delete query.shouldContinueRetryOnFocus\n\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        return data\n      } catch (error) {\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        // If we fail, increase the failureCount\n        query.dispatch({ type: actionFailed })\n\n        // Do we need to retry the request?\n        if (\n          query.config.retry === true ||\n          query.state.failureCount <= query.config.retry ||\n          (typeof query.config.retry === 'function' &&\n            query.config.retry(query.state.failureCount, error))\n        ) {\n          // Only retry if the document is visible\n          if (!isDocumentVisible()) {\n            // set this flag to continue retries on focus\n            query.shouldContinueRetryOnFocus = true\n            return new Promise(noop)\n          }\n\n          delete query.shouldContinueRetryOnFocus\n\n          // Determine the retryDelay\n          const delay = functionalUpdate(\n            query.config.retryDelay,\n            query.state.failureCount\n          )\n\n          // Return a new promise with the retry\n          return await new Promise((resolve, reject) => {\n            // Keep track of the retry timeout\n            query.retryTimeout = setTimeout(async () => {\n              if (query.cancelled) return reject(query.cancelled)\n\n              try {\n                const data = await tryFetchData(queryFn, ...args)\n                if (query.cancelled) return reject(query.cancelled)\n                resolve(data)\n              } catch (error) {\n                if (query.cancelled) return reject(query.cancelled)\n                reject(error)\n              }\n            }, delay)\n          })\n        }\n\n        throw error\n      }\n    }\n\n    query.fetch = async ({ __queryFn = query.queryFn } = {}) => {\n      // Create a new promise for the query cache if necessary\n      if (!query.promise) {\n        query.promise = (async () => {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null\n\n          const callbackInstances = [...query.instances]\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.fallbackInstance)\n          }\n\n          try {\n            // Set up the query refreshing state\n            query.dispatch({ type: actionFetch })\n\n            // Try to get the data\n            let data = await tryFetchData(__queryFn, ...query.queryKey)\n\n            query.setData(old =>\n              query.config.isDataEqual(old, data) ? old : data\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.config.onSuccess &&\n                instance.config.onSuccess(query.state.data)\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.config.onSettled &&\n                instance.config.onSettled(query.state.data, null)\n            )\n\n            delete query.promise\n\n            return data\n          } catch (error) {\n            query.dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error,\n            })\n\n            delete query.promise\n\n            if (error !== query.cancelled) {\n              callbackInstances.forEach(\n                instance =>\n                  instance.config.onError && instance.config.onError(error)\n              )\n\n              callbackInstances.forEach(\n                instance =>\n                  instance.config.onSettled &&\n                  instance.config.onSettled(undefined, error)\n              )\n\n              throw error\n            }\n          }\n        })()\n      }\n\n      return query.promise\n    }\n\n    return query\n  }\n\n  return queryCache\n}\n\nexport function queryReducer(state, action) {\n  const newState = switchActions(state, action)\n\n  Object.assign(newState, {\n    isLoading: newState.status === statusLoading,\n    isSuccess: newState.status === statusSuccess,\n    isError: newState.status === statusError,\n    isIdle: newState.status === statusIdle,\n  })\n\n  return newState\n}\n\nfunction switchActions(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.initialStatus === 'loading',\n        canFetchMore: false,\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status:\n          typeof state.data !== 'undefined' ? statusSuccess : statusLoading,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        canFetchMore: action.canFetchMore,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n          throwInErrorBoundary: true,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .invalidateQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (!query.instances.some(instance => instance.config.enabled)) {\n            return false\n          }\n\n          if (!query.state.isStale) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so refetching will create new one\n            delete query.promise\n          }\n\n          return query.config.refetchOnWindowFocus\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\n\nimport { useMountedCallback } from './utils'\nimport { useQueryCache } from './queryCache'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, unsafeRerender] = React.useReducer(d => d + 1, 1)\n  const rerender = useMountedCallback(unsafeRerender)\n\n  React.useEffect(() => queryCache.subscribe(rerender), [queryCache, rerender])\n\n  return React.useMemo(() => state && queryCache.isFetching, [\n    queryCache.isFetching,\n    state,\n  ])\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './config'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  useGetLatest,\n  Console,\n  uid,\n  useMountedCallback,\n  noop,\n} from './utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext().shared,\n    ...useConfigContext().mutations,\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      dispatch({ type: actionLoading })\n\n      let snapshotValue\n\n      try {\n        snapshotValue = await config.onMutate(variables)\n\n        let data\n\n        if (isLatest()) {\n          data = await getMutationFn()(variables)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        if (isLatest()) {\n          await config.onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          await onSettled(data, null, variables)\n        }\n\n        return data\n      } catch (error) {\n        if (isLatest()) {\n          Console.error(error)\n          await config.onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n\n          if (throwOnError ?? config.throwOnError) {\n            throw error\n          }\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    const { suspense, useErrorBoundary } = getConfig()\n\n    if ((useErrorBoundary ?? suspense) && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [\n    mutate,\n    {\n      ...state,\n      reset,\n      isIdle: state.status === statusIdle,\n      isLoading: state.status === statusLoading,\n      isSuccess: state.status === statusSuccess,\n      isError: state.status === statusError,\n    },\n  ]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './queryCache'\nimport { useConfigContext } from './config'\nimport { useMountedCallback, Console } from './utils'\n\nexport function useBaseQuery(queryKey, queryFn, config = {}) {\n  // Make a rerender function\n  const rerender = useMountedCallback(React.useState()[1])\n\n  // Build the final config\n  const configContext = useConfigContext()\n\n  config = {\n    ...configContext.shared,\n    ...configContext.queries,\n    ...config,\n  }\n\n  // Get the query cache\n  const queryCache = useQueryCache()\n\n  // Build the query for use\n  const query = queryCache.buildQuery(queryKey, queryFn, config)\n\n  // Create a query instance ref\n  const instanceRef = React.useRef()\n\n  // Subscribe to the query when the subscribe function changes\n  React.useEffect(() => {\n    instanceRef.current = query.subscribe(() => rerender({}))\n\n    // Unsubscribe when things change\n    return instanceRef.current.unsubscribe\n  }, [query, rerender])\n\n  // Always update the config\n  React.useEffect(() => {\n    instanceRef.current.updateConfig(config)\n  })\n\n  // Run the instance when the query or enabled change\n  React.useEffect(() => {\n    if (config.enabled && query) {\n      // Just for change detection\n    }\n    instanceRef.current.run()\n  }, [config.enabled, query])\n\n  const refetch = React.useCallback(async () => {\n    try {\n      await query.fetch()\n    } catch (error) {\n      Console.error(error)\n    }\n  }, [query])\n\n  return {\n    query,\n    refetch,\n    ...query.state,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...getQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function usePaginatedQuery(...args) {\n  let [queryKey, queryFn, config = {}] = getQueryArgs(args)\n\n  const lastDataRef = React.useRef()\n\n  // If latestData is set, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  const queryInfo = useBaseQuery(queryKey, queryFn, config)\n\n  if (!queryInfo.query.config.enabled) {\n    lastDataRef.current = undefined\n  }\n\n  let { data: latestData, status } = queryInfo\n\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  let resolvedData = latestData\n\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  if (typeof resolvedData !== 'undefined') {\n    const overrides = {\n      status: 'success',\n      isError: false,\n      isLoading: false,\n      isSuccess: true,\n    }\n\n    Object.assign(queryInfo.query.state, overrides)\n    Object.assign(queryInfo, overrides)\n  }\n\n  const paginatedQueryInfo = {\n    ...queryInfo,\n    resolvedData,\n    latestData,\n  }\n\n  handleSuspense(paginatedQueryInfo)\n\n  return paginatedQueryInfo\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, useGetLatest, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  const queryInfoRef = React.useRef()\n  let [queryKey, queryFn, config = {}] = getQueryArgs(args)\n\n  const { getFetchMore } = config\n  const getGetFetchMore = useGetLatest(getFetchMore)\n\n  // The default queryFn will query all pages and map them together\n  const originalQueryFn = queryFn\n\n  queryFn = async () => {\n    const data = []\n    const pageVariables = [...queryInfoRef.current.query.pageVariables]\n    const rebuiltPageVariables = []\n\n    do {\n      const args = pageVariables.shift()\n\n      if (!data.length) {\n        // the first page query doesn't need to be rebuilt\n        data.push(await originalQueryFn(...args))\n        rebuiltPageVariables.push(args)\n      } else {\n        // get an up-to-date cursor based on the previous data set\n        const nextCursor = getGetFetchMore()(data[data.length - 1], data)\n\n        // break early if there's no next cursor\n        // otherwise we'll start from the beginning\n        // which will cause unwanted duplication\n        if (!nextCursor) {\n          break\n        }\n\n        const pageArgs = [\n          // remove the last argument (the previously saved cursor)\n          ...args.slice(0, -1),\n          nextCursor,\n        ]\n\n        data.push(await originalQueryFn(...pageArgs))\n        rebuiltPageVariables.push(pageArgs)\n      }\n    } while (pageVariables.length)\n\n    queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n      data[data.length - 1],\n      data\n    )\n    queryInfoRef.current.query.pageVariables = rebuiltPageVariables\n\n    return data\n  }\n\n  const queryInfo = useBaseQuery(queryKey, queryFn, config)\n\n  if (\n    typeof queryInfo.query.canFetchMore === 'undefined' &&\n    typeof queryInfo.data !== 'undefined'\n  ) {\n    queryInfo.query.canFetchMore = getGetFetchMore()(\n      queryInfo.data[queryInfo.data.length - 1],\n      queryInfo.data\n    )\n  }\n\n  queryInfoRef.current = queryInfo\n\n  let {\n    data = [],\n    query: { canFetchMore },\n  } = queryInfo\n\n  // Here we seed the pageVariabes for the query\n  if (!queryInfo.query.pageVariables) {\n    queryInfo.query.pageVariables = [[...queryInfo.query.queryKey]]\n  }\n\n  const fetchMore = React.useCallback(\n    (\n      fetchMoreInfo = queryInfoRef.current.query.canFetchMore,\n      { previous = false } = {}\n    ) =>\n      queryInfoRef.current.query.canFetchMore\n        ? queryInfoRef.current.query.fetch({\n            __queryFn: async (...args) => {\n              try {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: previous ? 'previous' : 'next',\n                }))\n\n                const newArgs = previous\n                  ? [fetchMoreInfo, ...args]\n                  : [...args, fetchMoreInfo]\n                queryInfoRef.current.query.pageVariables[\n                  previous ? 'unshift' : 'push'\n                ](newArgs)\n\n                const newData = await originalQueryFn(...newArgs)\n\n                const data = previous\n                  ? [newData, ...queryInfoRef.current.data]\n                  : [...queryInfoRef.current.data, newData]\n\n                queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n                  newData,\n                  data\n                )\n\n                return data\n              } finally {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: false,\n                }))\n              }\n            },\n          })\n        : void 0,\n    [getGetFetchMore, originalQueryFn]\n  )\n\n  handleSuspense(queryInfo)\n\n  return {\n    ...queryInfo,\n    data,\n    canFetchMore,\n    fetchMore,\n  }\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","setConsole","c","useGetLatest","obj","ref","React","useRef","current","useCallback","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","hasOwnProperty","queryKey","queryFn","config","slice","Error","rest","useMountedCallback","callback","mounted","handleSuspense","queryInfo","query","suspense","useErrorBoundary","state","status","throwInErrorBoundary","wasSuspended","fetch","deepEqual","length","i","valueOf","prototype","call","configContext","createContext","DEFAULTS","shared","queryKeySerializerFn","defaultQueryKeySerializerFn","queries","enabled","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchOnWindowFocus","refetchInterval","queryFnParamsFilter","refetchOnMount","isDataEqual","onError","onSuccess","onSettled","mutations","throwOnError","onMutate","defaultConfigRef","useConfigContext","useContext","ReactQueryConfigProvider","children","configContextValue","newConfig","useMemo","contextShared","contextQueries","contextMutations","useEffect","invalidQueryKey","queryHash","parse","then","direct","Promise","resolve","body","recover","result","e","f","arguments","apply","reject","queryCache","makeQueryCache","queryCacheContext","queryCaches","useQueryCache","ReactQueryCacheProvider","resolvedQueryCache","push","indexOf","splice","clear","actionInit","actionFailed","actionMarkStale","actionMarkGC","actionFetch","actionSuccess","actionError","actionSetState","frozen","defaultConfig","globalListeners","configRef","isFetching","notifyGlobalListeners","values","reduce","acc","forEach","subscribe","cb","notify","getQueries","predicate","exact","filter","getQuery","getQueryData","data","removeQueries","cancelQueries","cancel","invalidateQueries","refetchActive","all","instances","invalidate","err","resetErrorBoundaries","buildQuery","userQueryKey","makeQuery","scheduleStaleTimeout","heal","scheduleGarbageCollection","setTimeout","fallbackInstance","prefetchQuery","force","isStale","setQueryData","setData","initialData","hasInitialData","initialStatus","queryReducer","type","dispatch","action","onStateUpdate","clearTimeout","staleTimeout","Infinity","cacheTimeout","markedForGarbageCollection","cancelled","cancelPromises","promise","clearIntervals","instance","clearInterval","setState","retryTimeout","id","refetchIntervalId","updateConfig","oldConfig","minInterval","setInterval","refetchIntervalInBackground","run","unsubscribe","tryFetchData","shouldContinueRetryOnFocus","failureCount","delay","__queryFn","callbackInstances","unshift","newState","switchActions","isLoading","isSuccess","isError","isIdle","canFetchMore","updatedAt","Date","now","visibilityChangeEvent","focusEvent","onWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","useIsFetching","useReducer","unsafeRerender","rerender","_await","getDefaultState","_empty","actionReset","_awaitIgnored","actionLoading","_invoke","actionResolve","_catch","actionReject","mutationReducer","useMutation","mutationFn","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","variables","mutationId","isLatest","snapshotValue","reset","useBaseQuery","useState","instanceRef","refetch","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","overrides","paginatedQueryInfo","pact","s","v","o","bind","observer","onFulfilled","onRejected","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","useInfiniteQuery","queryInfoRef","getFetchMore","getGetFetchMore","originalQueryFn","pageVariables","rebuiltPageVariables","shift","nextCursor","pageArgs","fetchMore","fetchMoreInfo","previous","isFetchingMore","newArgs","newData"],"mappings":"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"}