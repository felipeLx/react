{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = _interopDefault(require('react')); // not be considered breaking. We're just trying to approximate what a usual\n// combination would be to determine whether the effect is runaway.\n\n\nvar DEFAULT_CALL_COUNT = 60;\nvar DEFAULT_TIME_LIMIT = 1000; // this file is basically gone in production...\n// but people can still call the functions safely either way.\n\nvar noop = function () {\n  return function () {};\n};\n\nvar last = function (array) {\n  return array[array.length - 1];\n};\n\nvar hijackEffectHook = process.env.NODE_ENV === 'production' ? noop : function (hookName, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$callCount = _ref.callCount,\n      callCount = _ref$callCount === void 0 ? DEFAULT_CALL_COUNT : _ref$callCount,\n      _ref$timeLimit = _ref.timeLimit,\n      timeLimit = _ref$timeLimit === void 0 ? DEFAULT_TIME_LIMIT : _ref$timeLimit;\n\n  var originalHook = React[hookName];\n  React[hookName] = getHijackedEffectHook({\n    hookName: hookName,\n    callCount: callCount,\n    timeLimit: timeLimit\n  });\n  return function () {\n    React[hookName] = originalHook;\n  };\n};\n\nfunction getHijackedEffectHook(_ref2) {\n  var hookName = _ref2.hookName,\n      callCount = _ref2.callCount,\n      timeLimit = _ref2.timeLimit;\n  var originalHook = React[hookName];\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var hookCallback = args[0],\n        deps = args[1];\n    var ref = React.useRef([]);\n    var warnedRef = React.useRef(false);\n    return originalHook.call(React, function () {\n      var calls = ref.current;\n      var oldestCall = last(calls);\n      var now = Date.now();\n      calls.push({\n        time: now,\n        args: args\n      });\n\n      if (!warnedRef.current && calls.length >= callCount && oldestCall.time > now - timeLimit) {\n        var _console;\n\n        var allRecentCallDependencies = calls.map(function (c) {\n          return c.args[1];\n        });\n        var messages = [\"The following effect callback was invoked \" + callCount + \" times in \" + timeLimit + \"ms\", '\\n', hookCallback.toString()];\n\n        if (allRecentCallDependencies.some(Boolean)) {\n          messages.push('\\n', \"Here are the dependencies this effect was called with the last \" + callCount + \" times:\", allRecentCallDependencies);\n          messages.push('\\n', \"Here are the dependency changes between each call:\", allRecentCallDependencies.map(function (callDeps, callIndex) {\n            if (callIndex === 0) {\n              return callDeps;\n            }\n\n            return callDeps.map(function (dep, depIndex) {\n              var prevDep = allRecentCallDependencies[callIndex - 1][depIndex];\n              return Object.is(dep, prevDep) ? 'UNCHANGED' : dep;\n            });\n          }));\n          messages.push('\\n', \"Try to find where those changing dependencies are initialized. You probably need to memoize them using React.useMemo or React.useCallback\");\n        } else {\n          messages.push('\\n', \"This effect is not called with a dependencies argument and probably should. Start by adding `[]` as a second argument to the \" + hookName + \" call, then add any other dependencies as elements to that array. You may also be interested in installing ESLint with https://npm.im/eslint-plugin-react-hooks\");\n        }\n\n        (_console = console).warn.apply(_console, messages);\n\n        warnedRef.current = true;\n        throw new Error(\"Uh oh... Looks like we've got a runaway \" + hookName + \". Check the console for more info. Make sure the \" + hookName + \" is being passed the right dependencies. (By the way, this error message is from https://npm.im/stop-runaway-react-effects, not React)\");\n      } // remove old records\n\n\n      ref.current = calls // only store up to the callCount\n      .slice(0, callCount) // only store effects called within the timeLimit\n      .filter(function (r) {\n        return r.time > now - timeLimit;\n      }); // call the original callback\n\n      return hookCallback();\n    }, deps);\n  };\n}\n\nvar hijackEffects = process.env.NODE_ENV === 'production' ? noop : function (options) {\n  var restoreUseEffect = hijackEffectHook('useEffect', options);\n  var restoreUseLayoutEffect = hijackEffectHook('useLayoutEffect', options);\n  return function () {\n    restoreUseEffect();\n    restoreUseLayoutEffect();\n  };\n};\nexports.hijackEffectHook = hijackEffectHook;\nexports.hijackEffects = hijackEffects;","map":{"version":3,"sources":["/home/felipelx/Desktop/workspace/react/projectbe/node_modules/stop-runaway-react-effects/dist/stop-runaway-react-effects.cjs.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","React","require","DEFAULT_CALL_COUNT","DEFAULT_TIME_LIMIT","noop","last","array","length","hijackEffectHook","process","env","NODE_ENV","hookName","_temp","_ref","_ref$callCount","callCount","_ref$timeLimit","timeLimit","originalHook","getHijackedEffectHook","_ref2","_len","arguments","args","Array","_key","hookCallback","deps","ref","useRef","warnedRef","call","calls","current","oldestCall","now","Date","push","time","_console","allRecentCallDependencies","map","c","messages","toString","some","Boolean","callDeps","callIndex","dep","depIndex","prevDep","is","console","warn","apply","Error","slice","filter","r","hijackEffects","options","restoreUseEffect","restoreUseLayoutEffect"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = _interopDefault(require('react'));\n\n// not be considered breaking. We're just trying to approximate what a usual\n// combination would be to determine whether the effect is runaway.\n\nvar DEFAULT_CALL_COUNT = 60;\nvar DEFAULT_TIME_LIMIT = 1000; // this file is basically gone in production...\n// but people can still call the functions safely either way.\n\nvar noop = function () {\n  return function () {};\n};\n\nvar last = function (array) {\n  return array[array.length - 1];\n};\n\nvar hijackEffectHook = process.env.NODE_ENV === 'production' ? noop : function (hookName, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$callCount = _ref.callCount,\n      callCount = _ref$callCount === void 0 ? DEFAULT_CALL_COUNT : _ref$callCount,\n      _ref$timeLimit = _ref.timeLimit,\n      timeLimit = _ref$timeLimit === void 0 ? DEFAULT_TIME_LIMIT : _ref$timeLimit;\n\n  var originalHook = React[hookName];\n  React[hookName] = getHijackedEffectHook({\n    hookName: hookName,\n    callCount: callCount,\n    timeLimit: timeLimit\n  });\n  return function () {\n    React[hookName] = originalHook;\n  };\n};\n\nfunction getHijackedEffectHook(_ref2) {\n  var hookName = _ref2.hookName,\n      callCount = _ref2.callCount,\n      timeLimit = _ref2.timeLimit;\n  var originalHook = React[hookName];\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var hookCallback = args[0],\n        deps = args[1];\n    var ref = React.useRef([]);\n    var warnedRef = React.useRef(false);\n    return originalHook.call(React, function () {\n      var calls = ref.current;\n      var oldestCall = last(calls);\n      var now = Date.now();\n      calls.push({\n        time: now,\n        args: args\n      });\n\n      if (!warnedRef.current && calls.length >= callCount && oldestCall.time > now - timeLimit) {\n        var _console;\n\n        var allRecentCallDependencies = calls.map(function (c) {\n          return c.args[1];\n        });\n        var messages = [\"The following effect callback was invoked \" + callCount + \" times in \" + timeLimit + \"ms\", '\\n', hookCallback.toString()];\n\n        if (allRecentCallDependencies.some(Boolean)) {\n          messages.push('\\n', \"Here are the dependencies this effect was called with the last \" + callCount + \" times:\", allRecentCallDependencies);\n          messages.push('\\n', \"Here are the dependency changes between each call:\", allRecentCallDependencies.map(function (callDeps, callIndex) {\n            if (callIndex === 0) {\n              return callDeps;\n            }\n\n            return callDeps.map(function (dep, depIndex) {\n              var prevDep = allRecentCallDependencies[callIndex - 1][depIndex];\n              return Object.is(dep, prevDep) ? 'UNCHANGED' : dep;\n            });\n          }));\n          messages.push('\\n', \"Try to find where those changing dependencies are initialized. You probably need to memoize them using React.useMemo or React.useCallback\");\n        } else {\n          messages.push('\\n', \"This effect is not called with a dependencies argument and probably should. Start by adding `[]` as a second argument to the \" + hookName + \" call, then add any other dependencies as elements to that array. You may also be interested in installing ESLint with https://npm.im/eslint-plugin-react-hooks\");\n        }\n\n        (_console = console).warn.apply(_console, messages);\n\n        warnedRef.current = true;\n        throw new Error(\"Uh oh... Looks like we've got a runaway \" + hookName + \". Check the console for more info. Make sure the \" + hookName + \" is being passed the right dependencies. (By the way, this error message is from https://npm.im/stop-runaway-react-effects, not React)\");\n      } // remove old records\n\n\n      ref.current = calls // only store up to the callCount\n      .slice(0, callCount) // only store effects called within the timeLimit\n      .filter(function (r) {\n        return r.time > now - timeLimit;\n      }); // call the original callback\n\n      return hookCallback();\n    }, deps);\n  };\n}\n\nvar hijackEffects = process.env.NODE_ENV === 'production' ? noop : function (options) {\n  var restoreUseEffect = hijackEffectHook('useEffect', options);\n  var restoreUseLayoutEffect = hijackEffectHook('useLayoutEffect', options);\n  return function () {\n    restoreUseEffect();\n    restoreUseLayoutEffect();\n  };\n};\n\nexports.hijackEffectHook = hijackEffectHook;\nexports.hijackEffects = hijackEffects;\n"]},"metadata":{},"sourceType":"script"}