{"ast":null,"code":"import _defineProperty from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/felipe/Desktop/workspace/burger-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{connect}from'react-redux';import Aux from'../../hoc/Aux/Aux';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';import*as actions from'../../store/actions/index';import axios from'../../axios-orders';export var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);function BurgerBuilder(){var _getPrototypeOf2;var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BurgerBuilder)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={purchasing:false};_this.purchaseHandler=function(){if(_this.props.isAuthenticated){_this.setState({purchasing:true});}else{_this.props.onSetAuthRedirectPath('/checkout');_this.props.history.push('/auth');}};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){_this.props.onInitPurchase();_this.props.history.push('/checkout');};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(this.props);this.props.onInitIngredients();}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);return sum>0;}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ings);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var orderSummary=null;var burger=this.props.error?React.createElement(\"p\",null,\"Ingredients can't be loaded!\"):React.createElement(Spinner,null);if(this.props.ings){burger=React.createElement(Aux,null,React.createElement(Burger,{ingredients:this.props.ings}),React.createElement(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,purchasable:this.updatePurchaseState(this.props.ings),isAuth:this.props.isAuthenticated,ordered:this.purchaseHandler,price:this.props.price}));orderSummary=React.createElement(OrderSummary,{ingredients:this.props.ings,price:this.props.price,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}// {salad: true, meat: false, ...}\nreturn React.createElement(Aux,null,React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},orderSummary),burger);}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ings:state.burgerBuilder.ingredients,price:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuthenticated:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(actions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(actions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(){return dispatch(actions.initIngredients());},onInitPurchase:function onInitPurchase(){return dispatch(actions.purchaseInit());},onSetAuthRedirectPath:function onSetAuthRedirectPath(path){return dispatch(actions.setAuthRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["/home/felipe/Desktop/workspace/burger-app/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","Spinner","withErrorHandler","actions","axios","BurgerBuilder","state","purchasing","purchaseHandler","props","isAuthenticated","setState","onSetAuthRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","console","log","onInitIngredients","ingredients","sum","Object","keys","map","igKey","reduce","el","disabledInfo","ings","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","updatePurchaseState","price","mapStateToProps","burgerBuilder","totalPrice","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","purchaseInit","path","setAuthRedirectPath"],"mappings":"ogDAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,qDAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mDAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qCAApB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,6CAA7B,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CAEA,UAAaC,CAAAA,aAAb,2ZAKIC,KALJ,CAKY,CACJC,UAAU,CAAE,KADR,CALZ,OAyBIC,eAzBJ,CAyBsB,UAAM,CACpB,GAAG,MAAKC,KAAL,CAAWC,eAAd,CAA+B,CAC3B,MAAKC,QAAL,CAAe,CAAEJ,UAAU,CAAE,IAAd,CAAf,EACH,CAFD,IAEO,CACH,MAAKE,KAAL,CAAWG,qBAAX,CAAiC,WAAjC,EACA,MAAKH,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EACH,CACJ,CAhCL,OAkCIC,qBAlCJ,CAkC4B,UAAM,CAC1B,MAAKJ,QAAL,CAAe,CAAEJ,UAAU,CAAE,KAAd,CAAf,EACH,CApCL,OAsCIS,uBAtCJ,CAsC8B,UAAM,CAC5B,MAAKP,KAAL,CAAWQ,cAAX,GACA,MAAKR,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB,EACH,CAzCL,sGASyB,CACjBI,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAjB,EACA,KAAKA,KAAL,CAAWW,iBAAX,GACH,CAZL,gEAc0BC,WAd1B,CAcwC,CAChC,GAAMC,CAAAA,GAAG,CAAGC,MAAM,CAACC,IAAP,CAAaH,WAAb,EACPI,GADO,CACF,SAAAC,KAAK,CAAI,CACX,MAAOL,CAAAA,WAAW,CAACK,KAAD,CAAlB,CACH,CAHO,EAIPC,MAJO,CAIC,SAAEL,GAAF,CAAOM,EAAP,CAAe,CACpB,MAAON,CAAAA,GAAG,CAAGM,EAAb,CACH,CANO,CAML,CANK,CAAZ,CAOA,MAAON,CAAAA,GAAG,CAAG,CAAb,CACH,CAvBL,uCA2Cc,CACN,GAAMO,CAAAA,YAAY,kBACX,KAAKpB,KAAL,CAAWqB,IADA,CAAlB,CAGA,IAAM,GAAIC,CAAAA,GAAV,GAAiBF,CAAAA,YAAjB,CAAgC,CAC5BA,YAAY,CAACE,GAAD,CAAZ,CAAoBF,YAAY,CAACE,GAAD,CAAZ,EAAqB,CAAzC,CACH,CACD,GAAIC,CAAAA,YAAY,CAAG,IAAnB,CACA,GAAIC,CAAAA,MAAM,CAAG,KAAKxB,KAAL,CAAWyB,KAAX,CAAmB,4DAAnB,CAAyD,oBAAC,OAAD,MAAtE,CAEA,GAAK,KAAKzB,KAAL,CAAWqB,IAAhB,CAAuB,CACnBG,MAAM,CACF,oBAAC,GAAD,MACI,oBAAC,MAAD,EAAQ,WAAW,CAAE,KAAKxB,KAAL,CAAWqB,IAAhC,EADJ,CAEI,oBAAC,aAAD,EACI,eAAe,CAAE,KAAKrB,KAAL,CAAW0B,iBADhC,CAEI,iBAAiB,CAAE,KAAK1B,KAAL,CAAW2B,mBAFlC,CAGI,QAAQ,CAAEP,YAHd,CAII,WAAW,CAAE,KAAKQ,mBAAL,CAAyB,KAAK5B,KAAL,CAAWqB,IAApC,CAJjB,CAKI,MAAM,CAAE,KAAKrB,KAAL,CAAWC,eALvB,CAMI,OAAO,CAAE,KAAKF,eANlB,CAOI,KAAK,CAAE,KAAKC,KAAL,CAAW6B,KAPtB,EAFJ,CADJ,CAaAN,YAAY,CAAG,oBAAC,YAAD,EACX,WAAW,CAAE,KAAKvB,KAAL,CAAWqB,IADb,CAEX,KAAK,CAAE,KAAKrB,KAAL,CAAW6B,KAFP,CAGX,iBAAiB,CAAE,KAAKvB,qBAHb,CAIX,iBAAiB,CAAE,KAAKC,uBAJb,EAAf,CAKH,CACD;AACA,MACI,qBAAC,GAAD,MACI,oBAAC,KAAD,EAAO,IAAI,CAAE,KAAKV,KAAL,CAAWC,UAAxB,CAAoC,WAAW,CAAE,KAAKQ,qBAAtD,EACKiB,YADL,CADJ,CAIKC,MAJL,CADJ,CAQH,CAlFL,2BAAmCvC,SAAnC,EAqFA,GAAM6C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAjC,KAAK,CAAI,CAC7B,MAAO,CACHwB,IAAI,CAAExB,KAAK,CAACkC,aAAN,CAAoBnB,WADvB,CAEHiB,KAAK,CAAEhC,KAAK,CAACkC,aAAN,CAAoBC,UAFxB,CAGHP,KAAK,CAAE5B,KAAK,CAACkC,aAAN,CAAoBN,KAHxB,CAIHxB,eAAe,CAAEJ,KAAK,CAACoC,IAAN,CAAWC,KAAX,GAAqB,IAJnC,CAAP,CAMH,CAPD,CASA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAO,CACHV,iBAAiB,CAAE,2BAACW,OAAD,QAAaD,CAAAA,QAAQ,CAAC1C,OAAO,CAAC4C,aAAR,CAAsBD,OAAtB,CAAD,CAArB,EADhB,CAEHV,mBAAmB,CAAE,6BAACU,OAAD,QAAaD,CAAAA,QAAQ,CAAC1C,OAAO,CAAC6C,gBAAR,CAAyBF,OAAzB,CAAD,CAArB,EAFlB,CAGH1B,iBAAiB,CAAE,mCAAMyB,CAAAA,QAAQ,CAAC1C,OAAO,CAAC8C,eAAR,EAAD,CAAd,EAHhB,CAIHhC,cAAc,CAAE,gCAAM4B,CAAAA,QAAQ,CAAC1C,OAAO,CAAC+C,YAAR,EAAD,CAAd,EAJb,CAKHtC,qBAAqB,CAAE,+BAACuC,IAAD,QAAUN,CAAAA,QAAQ,CAAC1C,OAAO,CAACiD,mBAAR,CAA4BD,IAA5B,CAAD,CAAlB,EALpB,CAAP,CAOH,CARD,CAUA,cAAexD,CAAAA,OAAO,CAAC4C,eAAD,CAAkBK,kBAAlB,CAAP,CAA6C1C,gBAAgB,CAAEG,aAAF,CAAiBD,KAAjB,CAA7D,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport Aux from '../../hoc/Aux/Aux';\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\nimport * as actions from '../../store/actions/index';\nimport axios from '../../axios-orders';\n\nexport class BurgerBuilder extends Component {\n    // constructor(props) {\n    //     super(props);\n    //     this.state = {...}\n    // }\n    state = {\n        purchasing: false\n    }\n\n    componentDidMount () {\n        console.log(this.props); \n        this.props.onInitIngredients();\n    }\n\n    updatePurchaseState ( ingredients ) {\n        const sum = Object.keys( ingredients )\n            .map( igKey => {\n                return ingredients[igKey];\n            } )\n            .reduce( ( sum, el ) => {\n                return sum + el;\n            }, 0 );\n        return sum > 0;\n    }\n\n    purchaseHandler = () => {\n        if(this.props.isAuthenticated) {\n            this.setState( { purchasing: true } );\n        } else {\n            this.props.onSetAuthRedirectPath('/checkout'); \n            this.props.history.push('/auth');\n        }\n    }\n\n    purchaseCancelHandler = () => {\n        this.setState( { purchasing: false } );\n    }\n\n    purchaseContinueHandler = () => {\n        this.props.onInitPurchase();\n        this.props.history.push('/checkout');\n    }\n\n    render () {\n        const disabledInfo = {\n            ...this.props.ings\n        };\n        for ( let key in disabledInfo ) {\n            disabledInfo[key] = disabledInfo[key] <= 0\n        }\n        let orderSummary = null;\n        let burger = this.props.error ? <p>Ingredients can't be loaded!</p> : <Spinner />;\n\n        if ( this.props.ings ) {\n            burger = (\n                <Aux>\n                    <Burger ingredients={this.props.ings} />\n                    <BuildControls\n                        ingredientAdded={this.props.onIngredientAdded}\n                        ingredientRemoved={this.props.onIngredientRemoved}\n                        disabled={disabledInfo}\n                        purchasable={this.updatePurchaseState(this.props.ings)}\n                        isAuth={this.props.isAuthenticated}\n                        ordered={this.purchaseHandler}\n                        price={this.props.price} />\n                </Aux>\n            );\n            orderSummary = <OrderSummary\n                ingredients={this.props.ings}\n                price={this.props.price}\n                purchaseCancelled={this.purchaseCancelHandler}\n                purchaseContinued={this.purchaseContinueHandler} />;\n        }\n        // {salad: true, meat: false, ...}\n        return (\n            <Aux>\n                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>\n                    {orderSummary}\n                </Modal>\n                {burger}\n            </Aux>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        ings: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.totalPrice,\n        error: state.burgerBuilder.error,\n        isAuthenticated: state.auth.token !== null\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n        onIngredientRemoved: (ingName) => dispatch(actions.removeIngredient(ingName)),\n        onInitIngredients: () => dispatch(actions.initIngredients()),\n        onInitPurchase: () => dispatch(actions.purchaseInit()),\n        onSetAuthRedirectPath: (path) => dispatch(actions.setAuthRedirectPath(path))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler( BurgerBuilder, axios ));"]},"metadata":{},"sourceType":"module"}